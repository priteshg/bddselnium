async function resetRenderer(grApp: GlobalRelayApp) {
  await grApp.electronApp.evaluate(({ BrowserWindow }) => {
    const windows = BrowserWindow.getAllWindows();
    for (const win of windows) {
      win.close();
    }
  });

  // wait for the app to recreate its window
  const page = await grApp.electronApp.waitForEvent('window');

  await page.waitForLoadState('domcontentloaded');
  await page.waitForSelector('[data-testid="my-archive-root"]', {
    state: 'visible',
  });

  // IMPORTANT: update grApp.frame if you cache it
  grApp.frame = page.frameLocator('iframe'); // adjust to your app
}